{% load static %}
{% load humanize %}

<link rel="stylesheet" href="{% static 'css/nicepage.css' %}" media="screen">
<!--<link rel="stylesheet" href="{% static 'css/Products.css' %}" media="screen">-->
<script class="u-script" type="text/javascript" src="{% static 'js/jquery-1.9.1.min.js' %}" defer=""></script>
<script class="u-script" type="text/javascript" src="{% static 'js/nicepage.js' %}" defer=""></script>

<header class="u-border-2 u-border-white u-clearfix u-header u-sticky u-sticky-190f u-white u-header" id="sec-abaa">
    <div class="u-clearfix u-sheet u-sheet-1">
        <nav class="u-menu u-menu-hamburger u-offcanvas u-menu-1" data-responsive-from="XL">
            <div class="menu-collapse"
                 style="font-size: 1rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
                <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-borders u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                   href="#">
                    <svg class="u-svg-link" viewBox="0 0 24 24">
                        <use xlink:href="#menu-hamburger"></use>
                    </svg>
                    <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
                         xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <rect y="1" width="16" height="2"></rect>
                            <rect y="7" width="16" height="2"></rect>
                            <rect y="13" width="16" height="2"></rect>
                        </g>
                    </svg>
                </a>
            </div>

            <div class="u-custom-menu u-nav-container-collapse">
                <div style="border-color: #009649; !important;" class="u-border-2 u-border-custom-color-3 u-container-style u-custom-color-4 u-inner-container-layout u-opacity u-opacity-80 u-sidenav u-sidenav-1"
                     data-offcanvas-width="331.25">
                    <div style="background-color: #009649;border-color: #009649; !important;" class="u-inner-container-layout u-sidenav-overflow">
                        <div class="u-menu-close u-menu-close-1"></div>
                        <h3 class="u-text u-text-1">LOGO</h3>

                        <br><br>
                        <a href="/"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">
                            Home
                        </a>
                        <a href="{% url 'about' %}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">
                            About
                        </a>
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'users_profile' %}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">
                            Profile
                        </a>
                        {% endif %}
                        <a href="{% url 'products' %}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">
                            All products
                        </a>

                        {% for category in categories %}
                        <a href="/products/?category_name={{ category.name }}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">
                            {{category}}
                        </a>
                        {% endfor %}
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'logout' %}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1">LOGOUT </a>
                        {% else %}
                        <a href="{% url 'login' %}"
                           class="btn-mams u-align-left u-btn u-button-style
                                u-btn-1" style="bottom-top">LOGIN
                        </a>
                        <a href="{% url 'signup' %}"
                           class="btn-mams  u-align-left u-btn u-button-style
                                u-btn-1" style="bottom-top">SIGN
                            UP </a>
                        {% endif %}
                        <style>
                            .btn-mams{
                                color: #009649 !important;
                                border: 1px solid #009649 !important;
                                border-radius: 3px !important;
                            }
                            .btn-mams:hover{
                                color: #fff !important;
                                background: #009649 !important;
                                border-color: #009649 !important;
                                box-shadow: 0 0 0 1px #C6C6C6;
                            }
                        </style>

                    </div>
                </div>
                <div class="u-black u-menu-overlay u-opacity u-opacity-70" wfd-invisible="true"></div>
            </div>
        </nav>
        <a href="/" class="u-image u-logo u-image-1">
            <img src="{% static 'images/mamslogo4.png' %}" class="u-logo-image u-logo-image-1">
        </a>

        <div data-target="#kt_header_search_modal" type="button"
             data-toggle="modal" class=" u-icon u-icon-1">
            <svg class="u-svg-link" data-target="#kt_header_search_modal" type="button"
                 data-toggle="modal"
                 preserveAspectRatio="xMidYMin slice"
                 viewBox="0 0 56.966 56.966" style="">
                <use
                        xlink:href="#svg-47cb"></use>
            </svg>
            <svg data-target="#kt_header_search_modal" type="button"
                 data-toggle="modal" class="u-svg-content" viewBox="0 0 56.966 56.966" x="0px" y="0px"
                 id="svg-47cb" style="enable-background:new 0 0 56.966 56.966;">
                <path
                        d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23
                s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92
                c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17
                s-17-7.626-17-17S14.61,6,23.984,6z"></path>
            </svg>
        </div>
        {% if request.user.is_authenticated %}

        <span class="u-icon u-icon-2" data-href="users">
            <a href="{% url 'users_profile' %}">
            <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 55 55" style="">
                <use xlink:href="#svg-a21e"></use>
            </svg>

        <svg class="u-svg-content" viewBox="0 0 55 55" x="0px" y="0px"
             id="svg-a21e" style="enable-background:new 0 0 55 55;">
            <path d="M55,27.5C55,12.337,42.663,0,27.5,0S0,12.337,0,27.5c0,8.009,3.444,15.228,8.926,20.258l-0.026,0.023l0.892,0.752
	c0.058,0.049,0.121,0.089,0.179,0.137c0.474,0.393,0.965,0.766,1.465,1.127c0.162,0.117,0.324,0.234,0.489,0.348
	c0.534,0.368,1.082,0.717,1.642,1.048c0.122,0.072,0.245,0.142,0.368,0.212c0.613,0.349,1.239,0.678,1.88,0.98
	c0.047,0.022,0.095,0.042,0.142,0.064c2.089,0.971,4.319,1.684,6.651,2.105c0.061,0.011,0.122,0.022,0.184,0.033
	c0.724,0.125,1.456,0.225,2.197,0.292c0.09,0.008,0.18,0.013,0.271,0.021C25.998,54.961,26.744,55,27.5,55
	c0.749,0,1.488-0.039,2.222-0.098c0.093-0.008,0.186-0.013,0.279-0.021c0.735-0.067,1.461-0.164,2.178-0.287
	c0.062-0.011,0.125-0.022,0.187-0.034c2.297-0.412,4.495-1.109,6.557-2.055c0.076-0.035,0.153-0.068,0.229-0.104
	c0.617-0.29,1.22-0.603,1.811-0.936c0.147-0.083,0.293-0.167,0.439-0.253c0.538-0.317,1.067-0.648,1.581-1
	c0.185-0.126,0.366-0.259,0.549-0.391c0.439-0.316,0.87-0.642,1.289-0.983c0.093-0.075,0.193-0.14,0.284-0.217l0.915-0.764
	l-0.027-0.023C51.523,42.802,55,35.55,55,27.5z M2,27.5C2,13.439,13.439,2,27.5,2S53,13.439,53,27.5
	c0,7.577-3.325,14.389-8.589,19.063c-0.294-0.203-0.59-0.385-0.893-0.537l-8.467-4.233c-0.76-0.38-1.232-1.144-1.232-1.993v-2.957
	c0.196-0.242,0.403-0.516,0.617-0.817c1.096-1.548,1.975-3.27,2.616-5.123c1.267-0.602,2.085-1.864,2.085-3.289v-3.545
	c0-0.867-0.318-1.708-0.887-2.369v-4.667c0.052-0.52,0.236-3.448-1.883-5.864C34.524,9.065,31.541,8,27.5,8
	s-7.024,1.065-8.867,3.168c-2.119,2.416-1.935,5.346-1.883,5.864v4.667c-0.568,0.661-0.887,1.502-0.887,2.369v3.545
	c0,1.101,0.494,2.128,1.34,2.821c0.81,3.173,2.477,5.575,3.093,6.389v2.894c0,0.816-0.445,1.566-1.162,1.958l-7.907,4.313
	c-0.252,0.137-0.502,0.297-0.752,0.476C5.276,41.792,2,35.022,2,27.5z">

            </path></svg>
            </a></span>

        <!--shopping_cart-->

        <a class="u-shopping-cart u-shopping-cart-1" href="{% url 'checkout' %}"><span
                class="u-icon u-shopping-cart-icon u-icon-3">

<!--            cart-->
            <svg class="u-svg-link"
                 preserveAspectRatio="xMidYMin slice"
                 viewBox="0 0 16 16" style=""><use
                    xlink:href="#svg-fb09"></use></svg><svg class="u-svg-content" viewBox="0 0 16 16" x="0px" y="0px"
                                                            id="svg-fb09"><path d="M14.5,3l-2.1,5H6.1L5.9,7.6L4,3H14.5 M0,0v1h2.1L5,8l-2,4h11v-1H4.6l1-2H13l3-7H3.6L2.8,0H0z M12.5,13
            c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S13.3,13,12.5,13L12.5,13z M4.5,13C3.7,13,3,13.7,3,14.5S3.7,16,4.5,16
            S6,15.3,6,14.5S5.3,13,4.5,13L4.5,13z"></path></svg>

                <span class="u-custom-color-5 u-icon-circle u-shopping-cart-count"
                      id="cart-quantity"
                      style="font-size: 0.75rem;">
                    <!--shopping_cart_count-->
                    {% if get_cart_items > 10 %}
                    +9
                    {% else %}
                    {{get_cart_items|intword}}
                    {% endif %}
                    <!--/shopping_cart_count--></span>
            </span>
        </a><!--/shopping_cart-->
        {% else %}
        {% endif %}
    </div>
    <style class="u-sticky-style" data-style-id="190f">.u-sticky-fixed.u-sticky-190f:before, .u-body.u-sticky-fixed .u-sticky-190f:before {
borders: top right bottom left !important; border-color: #ffffff !important; border-width: 2px !important
}
    </style>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchInput = document.getElementById('search-input');
        const resultsContainer = document.getElementById('search-results');

        searchInput.addEventListener('keyup', function () {
            const query = searchInput.value;
            if (query.length > 0) {
                fetch(`/api/product-search/?q=${query}`)
                    .then(response => response.json())
                    .then(data => {
                        resultsContainer.innerHTML = '';
                        data.forEach(item => {
                            const productDiv = document.createElement('div');
                            productDiv.innerHTML = `<a href="/products/${item.id}/">${item.object.name}</a>`;
                            resultsContainer.appendChild(productDiv);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching search results:', error);
                        resultsContainer.innerHTML = '<p>An error occurred while searching.</p>';
                    });
            } else {
                resultsContainer.innerHTML = '';
            }
        });
    });
</script>
<div class="modal modal-edit bg-white fade show" tabindex="-1" role="dialog"
     id="kt_header_search_modal" aria-hidden="true"
     aria-modal="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content align-items-center justify-content-center modal-custom-content"
        >
            <div class="container mt-0">
                <div class="modal-header d-flex justify-content-end">
                    <!--begin::Close-->
                    <div data-dismiss="modal" aria-label="Close"
                         style="cursor: pointer">
                        <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                        <span class="svg-icon svg-icon-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24"
                                 fill="#fff">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1"
                                      transform="rotate(-45 6 17.3137)" fill="black"></rect>
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)"
                                      fill="black"></rect>
                            </svg>
                        </span>
                    </div>
                </div>
                <div class="modal-body">
                    <!--begin::Search-->
                    <!--                    <form action="{% url 'search' %}" class="d-flex pb-10" autocomplete="on" method="GET"-->
                    <!--                          value="{{request.GET.q}}">-->

                    <!--                        <input value="{{request.GET.q}}" autofocus="" type="text" placeholder="Search..."-->
                    <!--                               name="q"-->
                    <!--                               class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-input-1">-->
                    <!--                        <div class="autocomplete" style="width:300px; display:none;">-->
                    <!--                            <input type="submit" name="submit" value="Search"/>-->
                    <!--                        </div>-->
                    <!--                    </form>-->
                    <form onsubmit="return false;">
                        <input type="text" id="search-input" placeholder="Search for products...">
                    </form>
                    <br>
                    <div id="search-results"></div>
                    <br>

                    <h4 class="text-dark mt-3 mb-3"><b>Popular search</b></h4>
                    <!--begin::List Widget 5-->

                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358
                                    17.1642 8.0358 17.8358 8.45001 18.25C8.86423
                                    18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z"
                                          fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Medicine&submit=Search"
                               class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Medicine</a>
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z"
                                          fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Cough&submit=Search"
                               class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Cough</a>
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z"
                                          fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Headache&submit=Search"
                               class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Headache</a>
                        </div>
                        <!--end::Content-->
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .modal-custom-content {
        border: 0 !important;
        width: 100vw;
        height: 100vh;
        padding: 0;
        right: 0;
        top: 0;
        margin-top: 0;
    }

    @media (min-width: 992px) {
        .modal-custom-content {
            width: 100vw;
            height: 100vh;
        }
    }

    @media (max-width: 991px) {
        .modal-custom-content {
            width: 100vw;
            height: 100vh;
        }
    }

    .modal-edit .modal-dialog {
        max-width: 100%;
        margin: 0;
    }


</style>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
